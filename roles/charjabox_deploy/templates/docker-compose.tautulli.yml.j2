---
version: '3'

services:
  tautulli:
    image: tautulli/tautulli:{{ tautulli_tag }}
    container_name: Tautulli
    restart: unless-stopped
    ports:
      - {{ tautulli_port }}:8181
    volumes:
      - {{ tautulli_directories.config }}:/config
      - {{ plex_directories.config }}/Library/Application Support/Plex Media Server/Logs/:/plex_logs:ro
    labels:
      traefik.enable: "{{ tautulli_traefik_enabled }}"
      traefik.http.routers.tautulli.entrypoints: "web"
      traefik.http.routers.tautulli.rule: "Host(`{{ tautulli_domain }}`)"
      traefik.http.routers.tautulli-s.entrypoints: "web-secure"
      traefik.http.routers.tautulli-s.rule: "Host(`{{ tautulli_domain }}`)"
      traefik.http.routers.tautulli-s.tls: "true"
      traefik.http.services.tautulli.loadbalancer.server.port: "8989"
