---
version: '3'

services:
  sonarr:
    image: linuxserver/sonarr:{{ sonarr_tag }}
    container_name: Sonarr
    restart: unless-stopped
    ports:
      - {{ sonarr_port }}:8989
    volumes:
      - {{ sonarr_directories.config }}:/config
      - {{ sonarr_directories.data }}:/downloads
      - {{ charjabox_tv_directory }}:/tv
    labels:
      traefik.enable: "{{ sonarr_traefik_enabled }}"
      traefik.http.routers.sonarr.entrypoints: "web"
      traefik.http.routers.sonarr.rule: "Host(`{{ sonarr_domain }}`)"
      traefik.http.routers.sonarr-s.entrypoints: "web-secure"
      traefik.http.routers.sonarr-s.rule: "Host(`{{ sonarr_domain }}`)"
      traefik.http.routers.sonarr-s.tls: "true"
      traefik.http.services.sonarr.loadbalancer.server.port: "8989"
